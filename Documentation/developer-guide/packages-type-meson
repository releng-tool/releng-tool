.. _meson-pkg:

Meson Package
~~~~~~~~~~~~~

A Meson package provides support for processing a `Meson`_ supported module.

.. code-block:: python

   LIBFOO_TYPE = 'meson'

During the configuration stage of a Meson package, ``meson setup`` will be
invoked to generate build files for the module. For the build stage,
``meson compile`` will invoke the generated build files. For the installation
stage (if enabled), ``meson install`` will be used. Each stage can be
configured to manipulate environment variables and options used by Meson.

The default configuration built for projects is ``debugoptimized``. A developer
can override this option by explicitly adjusting the define option
``buildtype`` to, for example, ``debug``:

.. code-block:: python

   LIBFOO_CONF_DEFS = {
      'buildtype': 'debug',
   }

The following sections outline configuration options are available for a Meson
package.

.. _meson_build_defs:
.. include:: developer-guide/packages-build-defs
.. include:: developer-guide/packages-build-defs-example-dentry

.. _meson_build_env:
.. include:: developer-guide/packages-build-env

.. _meson_build_opts:
.. include:: developer-guide/packages-build-opts

LIBFOO_MESON_NOINSTALL
^^^^^^^^^^^^^^^^^^^^^^

Specifies whether the Meson package should skip an attempt to invoke the
install command. Ideally, projects will have an `install <meson-install_>`_
options configured to define how a project will install files into a target (or
staging) environment. Not all Meson projects have installation options
configured, or there can be cases where installation stage for a package to
fail due to issues with some host environments. A developer can specify this
no-install flag to skip a Meson-driven install request and manage installation
actions through other means (such as post-processing). By default, the
installation stage is invoked with a value of ``False``.

.. code-block:: python

   LIBFOO_MESON_NOINSTALL = True

.. _meson_conf_defs:
.. include:: developer-guide/packages-conf-defs
.. include:: developer-guide/packages-conf-defs-example-dentry

.. _meson_conf_env:
.. include:: developer-guide/packages-conf-env

.. _meson_conf_opts:
.. include:: developer-guide/packages-conf-opts

.. _meson_install_defs:
.. include:: developer-guide/packages-install-defs
.. include:: developer-guide/packages-install-defs-example-dentry

.. _meson_install_env:
.. include:: developer-guide/packages-install-env

.. _meson_install_opts:
.. include:: developer-guide/packages-install-opts


.. _meson-install: https://mesonbuild.com/Commands.html#install
